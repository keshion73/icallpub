{"remainingRequest":"C:\\workspace\\icallpub\\node_modules\\babel-loader\\lib\\index.js!C:\\workspace\\icallpub\\node_modules\\vuetify\\lib\\mixins\\detachable\\index.js","dependencies":[{"path":"C:\\workspace\\icallpub\\node_modules\\vuetify\\lib\\mixins\\detachable\\index.js","mtime":499162500000},{"path":"C:\\workspace\\icallpub\\babel.config.js","mtime":1640165807000},{"path":"C:\\workspace\\icallpub\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\icallpub\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gTWl4aW5zCmltcG9ydCBCb290YWJsZSBmcm9tICcuLi9ib290YWJsZSc7IC8vIFV0aWxpdGllcwoKaW1wb3J0IHsgZ2V0T2JqZWN0VmFsdWVCeVBhdGggfSBmcm9tICcuLi8uLi91dGlsL2hlbHBlcnMnOwppbXBvcnQgbWl4aW5zIGZyb20gJy4uLy4uL3V0aWwvbWl4aW5zJzsKaW1wb3J0IHsgY29uc29sZVdhcm4gfSBmcm9tICcuLi8uLi91dGlsL2NvbnNvbGUnOwpmdW5jdGlvbiB2YWxpZGF0ZUF0dGFjaFRhcmdldCh2YWwpIHsKICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbDsKICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGUgPT09ICdzdHJpbmcnKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gdmFsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERTsKfQovKiBAdnVlL2NvbXBvbmVudCAqLwoKZXhwb3J0IGRlZmF1bHQgbWl4aW5zKEJvb3RhYmxlKS5leHRlbmQoewogIG5hbWU6ICdkZXRhY2hhYmxlJywKICBwcm9wczogewogICAgYXR0YWNoOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlQXR0YWNoVGFyZ2V0CiAgICB9LAogICAgY29udGVudENsYXNzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBhY3RpdmF0b3JOb2RlOiBudWxsLAogICAgaGFzRGV0YWNoZWQ6IGZhbHNlCiAgfSksCiAgd2F0Y2g6IHsKICAgIGF0dGFjaCgpIHsKICAgICAgdGhpcy5oYXNEZXRhY2hlZCA9IGZhbHNlOwogICAgICB0aGlzLmluaXREZXRhY2goKTsKICAgIH0sCiAgICBoYXNDb250ZW50KCkgewogICAgICB0aGlzLiRuZXh0VGljayh0aGlzLmluaXREZXRhY2gpOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGlmICh0aGlzLmFjdGl2YXRvck5vZGUpIHsKICAgICAgICBjb25zdCBhY3RpdmF0b3IgPSBBcnJheS5pc0FycmF5KHRoaXMuYWN0aXZhdG9yTm9kZSkgPyB0aGlzLmFjdGl2YXRvck5vZGUgOiBbdGhpcy5hY3RpdmF0b3JOb2RlXTsKICAgICAgICBhY3RpdmF0b3IuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgIGlmICghbm9kZS5lbG0pIHJldHVybjsKICAgICAgICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy4kZWwgPT09IHRoaXMuJGVsLnBhcmVudE5vZGUuZmlyc3RDaGlsZCA/IHRoaXMuJGVsIDogdGhpcy4kZWwubmV4dFNpYmxpbmc7CiAgICAgICAgICB0aGlzLiRlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLmVsbSwgdGFyZ2V0KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5oYXNDb250ZW50ICYmIHRoaXMuaW5pdERldGFjaCgpOwogIH0sCiAgZGVhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8gSUUxMSBGaXgKICAgIHRyeSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmNvbnRlbnQgJiYgdGhpcy4kcmVmcy5jb250ZW50LnBhcmVudE5vZGUpIHsKICAgICAgICB0aGlzLiRyZWZzLmNvbnRlbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRyZWZzLmNvbnRlbnQpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFjdGl2YXRvck5vZGUpIHsKICAgICAgICBjb25zdCBhY3RpdmF0b3IgPSBBcnJheS5pc0FycmF5KHRoaXMuYWN0aXZhdG9yTm9kZSkgPyB0aGlzLmFjdGl2YXRvck5vZGUgOiBbdGhpcy5hY3RpdmF0b3JOb2RlXTsKICAgICAgICBhY3RpdmF0b3IuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgIG5vZGUuZWxtICYmIG5vZGUuZWxtLnBhcmVudE5vZGUgJiYgbm9kZS5lbG0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlLmVsbSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICB9CiAgICAvKiBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUgKi8KICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXRTY29wZUlkQXR0cnMoKSB7CiAgICAgIGNvbnN0IHNjb3BlSWQgPSBnZXRPYmplY3RWYWx1ZUJ5UGF0aCh0aGlzLiR2bm9kZSwgJ2NvbnRleHQuJG9wdGlvbnMuX3Njb3BlSWQnKTsKICAgICAgcmV0dXJuIHNjb3BlSWQgJiYgewogICAgICAgIFtzY29wZUlkXTogJycKICAgICAgfTsKICAgIH0sCiAgICBpbml0RGV0YWNoKCkgewogICAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQgfHwgIXRoaXMuJHJlZnMuY29udGVudCB8fCB0aGlzLmhhc0RldGFjaGVkIHx8CiAgICAgIC8vIExlYXZlIG1lbnUgaW4gcGxhY2UgaWYgYXR0YWNoZWQKICAgICAgLy8gYW5kIGRldiBoYXMgbm90IGNoYW5nZWQgdGFyZ2V0CiAgICAgIHRoaXMuYXR0YWNoID09PSAnJyB8fAogICAgICAvLyBJZiB1c2VkIGFzIGEgYm9vbGVhbiBwcm9wICg8di1tZW51IGF0dGFjaD4pCiAgICAgIHRoaXMuYXR0YWNoID09PSB0cnVlIHx8CiAgICAgIC8vIElmIGJvdW5kIHRvIGEgYm9vbGVhbiAoPHYtbWVudSA6YXR0YWNoPSJ0cnVlIj4pCiAgICAgIHRoaXMuYXR0YWNoID09PSAnYXR0YWNoJyAvLyBJZiBib3VuZCBhcyBib29sZWFuIHByb3AgaW4gcHVnICh2LW1lbnUoYXR0YWNoKSkKICAgICAgKSByZXR1cm47CiAgICAgIGxldCB0YXJnZXQ7CiAgICAgIGlmICh0aGlzLmF0dGFjaCA9PT0gZmFsc2UpIHsKICAgICAgICAvLyBEZWZhdWx0LCBkZXRhY2ggdG8gYXBwCiAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYXBwXScpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLmF0dGFjaCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAvLyBDU1Mgc2VsZWN0b3IKICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuYXR0YWNoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBET00gRWxlbWVudAogICAgICAgIHRhcmdldCA9IHRoaXMuYXR0YWNoOwogICAgICB9CiAgICAgIGlmICghdGFyZ2V0KSB7CiAgICAgICAgY29uc29sZVdhcm4oYFVuYWJsZSB0byBsb2NhdGUgdGFyZ2V0ICR7dGhpcy5hdHRhY2ggfHwgJ1tkYXRhLWFwcF0nfWAsIHRoaXMpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy4kcmVmcy5jb250ZW50KTsKICAgICAgdGhpcy5oYXNEZXRhY2hlZCA9IHRydWU7CiAgICB9CiAgfQp9KTs="},{"version":3,"mappings":"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","names":["Bootable","getObjectValueByPath","mixins","consoleWarn","validateAttachTarget","val","type","nodeType","Node","ELEMENT_NODE","extend","name","props","attach","default","validator","contentClass","String","data","activatorNode","hasDetached","watch","initDetach","hasContent","$nextTick","beforeMount","activator","Array","isArray","forEach","node","elm","$el","parentNode","target","firstChild","nextSibling","insertBefore","mounted","deactivated","isActive","beforeDestroy","$refs","content","removeChild","e","console","log","methods","getScopeIdAttrs","scopeId","$vnode","_isDestroyed","document","querySelector","appendChild"],"sourceRoot":"","sources":["../../../src/mixins/detachable/index.ts"],"sourcesContent":["// Mixins\nimport Bootable from '../bootable'\n\n// Utilities\nimport { getObjectValueByPath } from '../../util/helpers'\nimport mixins, { ExtractVue } from '../../util/mixins'\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue, { PropOptions } from 'vue'\nimport { VNode } from 'vue/types'\n\ninterface options extends Vue {\n  $el: HTMLElement\n  $refs: {\n    content: HTMLElement\n  }\n}\n\nfunction validateAttachTarget (val: any) {\n  const type = typeof val\n\n  if (type === 'boolean' || type === 'string') return true\n\n  return val.nodeType === Node.ELEMENT_NODE\n}\n\n/* @vue/component */\nexport default mixins<options &\n  /* eslint-disable indent */\n  ExtractVue<typeof Bootable>\n  /* eslint-enable indent */\n>(Bootable).extend({\n  name: 'detachable',\n\n  props: {\n    attach: {\n      default: false,\n      validator: validateAttachTarget,\n    } as PropOptions<boolean | string | Element>,\n    contentClass: {\n      type: String,\n      default: '',\n    },\n  },\n\n  data: () => ({\n    activatorNode: null as null | VNode | VNode[],\n    hasDetached: false,\n  }),\n\n  watch: {\n    attach () {\n      this.hasDetached = false\n      this.initDetach()\n    },\n    hasContent () {\n      this.$nextTick(this.initDetach)\n    },\n  },\n\n  beforeMount () {\n    this.$nextTick(() => {\n      if (this.activatorNode) {\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\n\n        activator.forEach(node => {\n          if (!node.elm) return\n          if (!this.$el.parentNode) return\n\n          const target = this.$el === this.$el.parentNode.firstChild\n            ? this.$el\n            : this.$el.nextSibling\n\n          this.$el.parentNode.insertBefore(node.elm, target)\n        })\n      }\n    })\n  },\n\n  mounted () {\n    this.hasContent && this.initDetach()\n  },\n\n  deactivated () {\n    this.isActive = false\n  },\n\n  beforeDestroy () {\n    // IE11 Fix\n    try {\n      if (\n        this.$refs.content &&\n        this.$refs.content.parentNode\n      ) {\n        this.$refs.content.parentNode.removeChild(this.$refs.content)\n      }\n\n      if (this.activatorNode) {\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\n        activator.forEach(node => {\n          node.elm &&\n            node.elm.parentNode &&\n            node.elm.parentNode.removeChild(node.elm)\n        })\n      }\n    } catch (e) { console.log(e) } /* eslint-disable-line no-console */\n  },\n\n  methods: {\n    getScopeIdAttrs () {\n      const scopeId = getObjectValueByPath(this.$vnode, 'context.$options._scopeId')\n\n      return scopeId && {\n        [scopeId]: '',\n      }\n    },\n    initDetach () {\n      if (this._isDestroyed ||\n        !this.$refs.content ||\n        this.hasDetached ||\n        // Leave menu in place if attached\n        // and dev has not changed target\n        this.attach === '' || // If used as a boolean prop (<v-menu attach>)\n        this.attach === true || // If bound to a boolean (<v-menu :attach=\"true\">)\n        this.attach === 'attach' // If bound as boolean prop in pug (v-menu(attach))\n      ) return\n\n      let target\n      if (this.attach === false) {\n        // Default, detach to app\n        target = document.querySelector('[data-app]')\n      } else if (typeof this.attach === 'string') {\n        // CSS selector\n        target = document.querySelector(this.attach)\n      } else {\n        // DOM Element\n        target = this.attach\n      }\n\n      if (!target) {\n        consoleWarn(`Unable to locate target ${this.attach || '[data-app]'}`, this)\n        return\n      }\n\n      target.appendChild(this.$refs.content)\n\n      this.hasDetached = true\n    },\n  },\n})\n"]}]}