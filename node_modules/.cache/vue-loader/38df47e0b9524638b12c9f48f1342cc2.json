{"remainingRequest":"C:\\workspace\\icallpub\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\workspace\\icallpub\\src\\views\\Ecommerce\\Products\\Widgets\\HtmlEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\workspace\\icallpub\\src\\views\\Ecommerce\\Products\\Widgets\\HtmlEditor.vue","mtime":1646925298000},{"path":"C:\\workspace\\icallpub\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\icallpub\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\workspace\\icallpub\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\icallpub\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAicXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaHRtbC1lZGl0b3IiLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgIjxwPkxvbmcgc2xlZXZlcyBibGFjayBkZW5pbSBqYWNrZXQgd2l0aCBhIHR3aXN0ZWQgZGVzaWduLiBDb250cmFzdCBzdGl0Y2hpbmcuIEJ1dHRvbiB1cCBjbG9zdXJlLiBXaGl0ZSBhcnJvdyBwcmludHMgb24gdGhlIGJhY2suPC9wPiIsCiAgICB9LAogICAgbmFtZTogU3RyaW5nLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXRvcjogbnVsbCwKICAgICAgY29udGVudDogbnVsbCwKICAgICAgbGFzdEh0bWxWYWx1ZTogIiIsCiAgICAgIGVkaXRvcklkOiBudWxsLAogICAgICB0b29sYmFySWQ6IG51bGwsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdGlhbGl6ZShRdWlsbCkgewogICAgICB0aGlzLmVkaXRvciA9IG5ldyBRdWlsbChgIyR7dGhpcy5lZGl0b3JJZH1gLCB7CiAgICAgICAgdGhlbWU6ICJzbm93IiwKICAgICAgICBtb2R1bGVzOiB7CiAgICAgICAgICB0b29sYmFyOiBgIyR7dGhpcy50b29sYmFySWR9YCwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuZWRpdG9yLnBhc3RlSFRNTCh0aGlzLnZhbHVlKTsKICAgICAgfQogICAgICBsZXQgZWRpdG9yUmVmID0gdGhpcy4kcmVmcy5lZGl0b3I7CiAgICAgIGxldCBub2RlID0gZWRpdG9yUmVmLmNoaWxkcmVuWzBdOwogICAgICB0aGlzLmVkaXRvci5vbigidGV4dC1jaGFuZ2UiLCAoKSA9PiB7CiAgICAgICAgbGV0IGh0bWwgPSBub2RlLmlubmVySFRNTDsKICAgICAgICBpZiAoaHRtbCA9PT0gIjxwPjxicj48L3A+IikgewogICAgICAgICAgaHRtbCA9ICIiOwogICAgICAgIH0KICAgICAgICB0aGlzLmNvbnRlbnQgPSBodG1sOwogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5jb250ZW50KTsKICAgICAgfSk7CiAgICB9LAogICAgcGFzdGVIVE1MKCkgewogICAgICBpZiAoIXRoaXMuZWRpdG9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZWRpdG9yLnBhc3RlSFRNTCh0aGlzLnZhbHVlKTsKICAgIH0sCiAgICByYW5kb21TdHJpbmcoKSB7CiAgICAgIGxldCB0ZXh0ID0gIiI7CiAgICAgIGxldCBwb3NzaWJsZSA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IjsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspCiAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7CiAgICAgIHJldHVybiB0ZXh0OwogICAgfSwKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBsZXQgUXVpbGwgPSBhd2FpdCBpbXBvcnQoInF1aWxsIik7CiAgICBRdWlsbCA9IFF1aWxsLmRlZmF1bHQgfHwgUXVpbGw7CiAgICB0aGlzLmVkaXRvcklkID0gdGhpcy5yYW5kb21TdHJpbmcoKTsKICAgIHRoaXMudG9vbGJhcklkID0gdGhpcy5yYW5kb21TdHJpbmcoKTsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5pbml0aWFsaXplKFF1aWxsKTsKICAgIH0pOwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsICE9PSB0aGlzLmNvbnRlbnQpIHsKICAgICAgICB0aGlzLnBhc3RlSFRNTChuZXdWYWwpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["HtmlEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HtmlEditor.vue","sourceRoot":"src/views/Ecommerce/Products/Widgets","sourcesContent":["<template>\n  <div\n    class=\"quill mt-3\"\n    :class=\"this.$route.name == 'NewProduct' ? 'h-100' : ' '\"\n  >\n    <div :id=\"toolbarId\">\n      <div class=\"ql-formats\">\n        <button class=\"ql-bold\"></button>\n        <button class=\"ql-italic\"></button>\n        <button class=\"ql-underline\"></button>\n        <button class=\"ql-link\"></button>\n        <button class=\"ql-blockquote\"></button>\n        <button class=\"ql-code\"></button>\n        <button class=\"ql-image\"></button>\n        <button type=\"button\" class=\"ql-list\" value=\"ordered\"></button>\n        <button type=\"button\" class=\"ql-list\" value=\"bullet\"></button>\n      </div>\n    </div>\n    <div :id=\"editorId\" :name=\"name\" class=\"\" ref=\"editor\"></div>\n  </div>\n</template>\n<script>\nimport \"quill/dist/quill.snow.css\";\nexport default {\n  name: \"html-editor\",\n  props: {\n    value: {\n      type: String,\n      default:\n        \"<p>Long sleeves black denim jacket with a twisted design. Contrast stitching. Button up closure. White arrow prints on the back.</p>\",\n    },\n    name: String,\n  },\n  data() {\n    return {\n      editor: null,\n      content: null,\n      lastHtmlValue: \"\",\n      editorId: null,\n      toolbarId: null,\n    };\n  },\n  methods: {\n    initialize(Quill) {\n      this.editor = new Quill(`#${this.editorId}`, {\n        theme: \"snow\",\n        modules: {\n          toolbar: `#${this.toolbarId}`,\n        },\n      });\n      if (this.value.length > 0) {\n        this.editor.pasteHTML(this.value);\n      }\n      let editorRef = this.$refs.editor;\n      let node = editorRef.children[0];\n      this.editor.on(\"text-change\", () => {\n        let html = node.innerHTML;\n        if (html === \"<p><br></p>\") {\n          html = \"\";\n        }\n        this.content = html;\n        this.$emit(\"input\", this.content);\n      });\n    },\n    pasteHTML() {\n      if (!this.editor) {\n        return;\n      }\n      this.editor.pasteHTML(this.value);\n    },\n    randomString() {\n      let text = \"\";\n      let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n      for (let i = 0; i < 5; i++)\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      return text;\n    },\n  },\n  async mounted() {\n    let Quill = await import(\"quill\");\n    Quill = Quill.default || Quill;\n    this.editorId = this.randomString();\n    this.toolbarId = this.randomString();\n    this.$nextTick(() => {\n      this.initialize(Quill);\n    });\n  },\n  watch: {\n    value(newVal) {\n      if (newVal !== this.content) {\n        this.pasteHTML(newVal);\n      }\n    },\n  },\n};\n</script>\n"]}]}